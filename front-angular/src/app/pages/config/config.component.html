<app-topbar></app-topbar>
<div id="login-background" class="container-fluid d-flex justify-content-center align-items-center "
    style="background: linear-gradient(to right, #dbdbdb, #dbdbdb); height: 100%; position: fixed;"></div>
<app-menu-desktop></app-menu-desktop>
<div class="div-config-content">
    <div class="accordion" id="accordionExample">
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
                    aria-expanded="true" aria-controls="collapseOne">
                    Solicitar Nova Senha
                </button>
            </h2>
            <div id="collapseOne" class="accordion-collapse collapse">
                <div class="accordion-body">
                    Para mandar uma notificação aonde você possa alterara sua senha, clique aqui:
                    <button class="btn-custom">Mandar</button>
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                    Relatório Historico
                </button>
            </h2>
            <div id="collapseTwo" class="accordion-collapse collapse">
                <div class="accordion-body">

                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                    Exportar Excel
                </button>
            </h2>
            <div id="collapseThree" class="accordion-collapse collapse">
                <div class="accordion-body">
                    <p>Selecione alguma dessas opções:</p>
                    <button (click)="openModal('tabelas')" class="btn-custom">Exportar Tabelas</button>
                    ou
                    <button (click)="openModal('historico')" class="btn-custom">Exportar Histórico</button>
                </div>
            </div>
        </div>
        <div class="accordion-item">
            <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                    Suporte
                </button>
            </h2>
            <div id="collapseFour" class="accordion-collapse collapse">
                <div class="accordion-body">
                    <strong>This is the third item’s accordion body.</strong> It is hidden by default, until the
                    collapse plugin adds the appropriate classes that we use to style each element. These classes
                    control the overall appearance, as well as the showing and hiding via CSS transitions. You can
                    modify any of this with custom CSS or overriding our default variables. It’s also worth noting that
                    just about any HTML can go within the <code>.accordion-body</code>, though the transition does limit
                    overflow.
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal-backdrop" *ngIf="showModal">
    <div class="modal-content-custom">
        <h3>Exportar {{ exportType | titlecase }}</h3>
        <div *ngIf="exportType === 'tabelas'" style="margin-bottom: 10px;">
            <label>
                <input type="checkbox" [checked]="allSelected()" (change)="toggleSelecionarTodos($event)">
                Selecionar Todos
            </label>
        </div>
        <div *ngIf="exportType === 'tabelas'" class="tables-selection">
            <div class="table-card" *ngFor="let tabela of tabelasSetor">
                <p><strong>Nome:</strong> {{ tabela.tableName }}</p>
                <p><strong>Quant de itens:</strong> {{ tabela.itemCount }}</p>
                <label>
                    <input type="checkbox" [(ngModel)]="tabela.selecionado">
                    Selecionar
                </label>
            </div>
        </div>
        <div *ngIf="exportType === 'historico'" class="historico-filtro">
            <label>
                Data início:
                <input type="date" [(ngModel)]="dataInicio">
            </label>
            <label>
                Data fim:
                <input type="date" [(ngModel)]="dataFim">
            </label>
            <div class="historico-filtro-buttons">
                <button (click)="carregarHistoricoSetor()" class="btn-custom">Filtrar</button>
                <button (click)="limparFiltro()" class="btn-custom secondary">Limpar Filtro</button>
            </div>
            <div class="historico-preview" *ngIf="historicoSetor.length > 0">
                <p>
                    Total de movimentações: {{ historicoSetor.length }} |
                    Total de entrada: {{ totalEntrada }} |
                    Total de saída: {{ totalSaida }}
                </p>
            </div>
        </div>
        <div class="modal-footer">
            <button (click)="closeModal()" class="btn-custom danger">Cancelar</button>
            <button *ngIf="exportType === 'tabelas'" (click)="exportarExcel()" class="btn-custom">Exportar
                Excel</button>
            <button *ngIf="exportType === 'historico'" (click)="exportarHistoricoExcel()" class="btn-custom">Exportar
                Histórico Excel</button>
        </div>
    </div>
</div>